input {
    file {
        path => ["PATH_TO_DATASET_SOURCE_FILE"]
        start_position => "beginning"
        sincedb_path => "/dev/null"
        codec => plain {
            charset => "CP1252"
        }
    }
  	elasticsearch {
    	user => elastic
    	password => changeme
	}
}

filter {
    csv {
        separator => ","
        columns => [
	        "PANDAS_ID",
	        "ID_PREDIO",
			"LOTE",
			"ESTADO",
			"MARCA",
			"PROGRAMA_GESTION",
			"FECHA_ESTADO",
			"ID_SOPORTE_TRIBUTARIO",
			"FUENTE_DIR",
			"FECHA_REG",
			"MUNICIPIO_ENVIO",
			"ESTRATO",
			"AREA_TERRENO",
			"AREA_CONSTRUIDA",
			"DESTINO",
			"TARIFA_PLENA",
			"AJUSTE_TARIFA",
			"PORCENTAJE_EXENCION",
			"ID_UNICO_CONTRIBUYENTE",
			"TIPO_SOPORTE",
			"NUMERO_SOPORTE_TRIBUTARIO",
			"AUTOAVALUO",
			"IMPUESTO_CARGO",
			"FECHA_LIMITE_1",
			"AJUSTE_EQUIDAD_1",
			"IMPUESTO_AJUSTADO_1",
			"SALDO_CARGO_1",
			"VALOR_SANCION_1",
			"VALOR_PAGAR_1",
			"VALOR_DESCUENTO_1",
			"TOTAL_PAGAR_1",
			"VALOR_PAGO_VOLUNTARIO_1",
			"VALOR_TOTAL_CON_PAGO_VOL_1",
			"FECHA_LIMITE_2",
			"AJUSTE_EQUIDAD_2",
			"IMPUESTO_AJUSTADO_2",
			"SALDO_CARGO_2",
			"VALOR_SANCION_2",
			"VALOR_PAGAR_2",
			"VALOR_DESCUENTO_2",
			"TOTAL_PAGAR_2",
			"VALOR_PAGO_VOLUNTARIO_2",
			"VALOR_TOTAL_CON_PAGO_VOL_2",
			"FECHA_LIMITE_3",
			"AJUSTE_EQUIDAD_3",
			"IMPUESTO_AJUSTADO_3",
			"SALDO_CARGO_3",
			"VALOR_SANCION_3",
			"VALOR_PAGAR_3",
			"VALOR_DESCUENTO_3",
			"TOTAL_PAGAR_3",
			"VALOR_PAGO_VOLUNTARIO_3",
			"VALOR_TOTAL_CON_PAGO_VOL_3",
			"VALOR_PAGAR_23"
        ]
    }
    mutate{
    	replace => { "message" => "%{host}: My new message" }
        convert => {
        	"PANDAS_ID"  => "string"
        	"ID_PREDIO"  => "string"
			"LOTE"  => "string"
			"ESTADO"  => "string"
			"MARCA"  => "string"
			"PROGRAMA_GESTION" => "string"
			"FECHA_ESTADO"  => "string"
			"ID_SOPORTE_TRIBUTARIO"  => "string"
			"FUENTE_DIR"  => "string"
			"FECHA_REG" => "string"
			"MUNICIPIO_ENVIO"  => "string"
			"ESTRATO"  => "string"
			"AREA_TERRENO"  => "float"
			"AREA_CONSTRUIDA"  => "float"
			"DESTINO"  => "string"
			"TARIFA_PLENA"  => "float"
			"AJUSTE_TARIFA"  => "float"
			"PORCENTAJE_EXENCION"  => "float"
			"ID_UNICO_CONTRIBUYENTE"  => "string"
			"TIPO_SOPORTE"  => "string"
			"NUMERO_SOPORTE_TRIBUTARIO"  => "string"
			"AUTOAVALUO"  => "float"
			"IMPUESTO_CARGO"  => "float"
			"FECHA_LIMITE_1"  => "string"
			"AJUSTE_EQUIDAD_1"  => "float"
			"IMPUESTO_AJUSTADO_1"  => "float"
			"SALDO_CARGO_1"  => "float"
			"VALOR_SANCION_1"  => "float"
			"VALOR_PAGAR_1"  => "float"
			"VALOR_DESCUENTO_1"  => "float"
			"TOTAL_PAGAR_1"  => "float"
			"VALOR_PAGO_VOLUNTARIO_1"  => "float"
			"VALOR_TOTAL_CON_PAGO_VOL_1"  => "float"
			"FECHA_LIMITE_2" => "string"
			"AJUSTE_EQUIDAD_2"  => "float"
			"IMPUESTO_AJUSTADO_2"  => "float"
			"SALDO_CARGO_2"  => "float"
			"VALOR_SANCION_2"  => "float"
			"VALOR_PAGAR_2"  => "float"
			"VALOR_DESCUENTO_2"  => "float"
			"TOTAL_PAGAR_2"  => "float"
			"VALOR_PAGO_VOLUNTARIO_2"  => "float"
			"VALOR_TOTAL_CON_PAGO_VOL_2"  => "float"
			"FECHA_LIMITE_3" => "string"
			"AJUSTE_EQUIDAD_3"  => "float"
			"IMPUESTO_AJUSTADO_3"  => "float"
			"SALDO_CARGO_3"  => "float"
			"VALOR_SANCION_3"  => "float"
			"VALOR_PAGAR_3"  => "float"
			"VALOR_DESCUENTO_3"  => "float"
			"TOTAL_PAGAR_3"  => "float"
			"VALOR_PAGO_VOLUNTARIO_3"  => "float"
			"VALOR_TOTAL_CON_PAGO_VOL_3"  => "float"
			"VALOR_PAGAR_23" => "float"
        }
    }
}

output {
    stdout { codec => rubydebug }
    elasticsearch {
        action => "index"
        hosts => ["127.0.0.1:9200"]
        index => "predial"
        document_type => "facturapredial"
        document_id => "%{ID_PREDIO}"        
        workers => 1
    	user => elastic
    	password => changeme
    }
}